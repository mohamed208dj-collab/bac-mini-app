<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAC PLUS | Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { 
            font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; padding: 20px; overflow-x: hidden;
            background-image: radial-gradient(circle at bottom left, rgba(37, 99, 235, 0.1), transparent);
        }

        /* Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ø¦Ù… */
        .floating-back { 
            position: fixed; bottom: 30px; right: 30px; width: 65px; height: 65px; 
            background: #2563eb; border-radius: 22px; 
            display: flex; align-items: center; justify-content: center; 
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4); z-index: 1000;
        }

        /* Ø¨Ø§Ø± Ø§Ù„Ø®Ø¨Ø±Ø© XP */
        .xp-bar-container { background: rgba(255,255,255,0.05); border-radius: 15px; height: 12px; width: 100%; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .xp-bar-fill { background: linear-gradient(90deg, #3b82f6, #60a5fa); height: 100%; width: 0%; transition: 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ÙŠÙˆÙ… */
        .day-box {
            background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px; padding: 15px; text-align: center; transition: 0.3s;
        }
        .day-box.active { border-color: #3b82f6; background: rgba(59, 130, 246, 0.15); transform: scale(1.05); }
        .day-box.done { background: #10b981; border-color: #10b981; color: white; }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-up { animation: fadeInUp 0.5s ease forwards; }

        #customAlert { display: none; position: fixed; top: 30px; left: 50%; transform: translateX(-50%); z-index: 6000; padding: 15px 30px; border-radius: 20px; font-weight: 900; }
    </style>
</head>
<body class="pb-32">

    <div id="customAlert"></div>

    <a href="home.html" class="floating-back">
        <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
    </a>

    <div class="mt-8 mb-12 animate-up">
        <div class="flex justify-between items-end mb-4">
            <div>
                <h2 class="text-4xl font-black italic">LEVEL <span id="lvlDisplay" class="text-blue-500">1</span></h2>
                <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">Ù†Ø¸Ø§Ù… ØªÙ‚Ø¯Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</p>
            </div>
            <div class="text-right">
                <span class="text-xs font-black text-blue-400"><span id="xpDisplay">0</span> / 100 XP</span>
            </div>
        </div>
        <div class="xp-bar-container">
            <div id="xpBar" class="xp-bar-fill"></div>
        </div>
    </div>

    <div class="grid grid-cols-4 gap-3 mb-12 px-1" id="daysGrid">
        </div>

    <div class="px-2 animate-up" style="animation-delay: 0.3s">
        <button id="checkBtn" onclick="confirmEntry()" class="w-full bg-blue-600 py-6 rounded-3xl font-black text-sm shadow-xl active:scale-95 transition-all">
            ØªØ£ÙƒÙŠØ¯ Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ… (+20 XP)
        </button>
    </div>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø®Ø¨Ø±Ø©
        let xp = parseInt(localStorage.getItem('userXP')) || 0;
        let level = Math.floor(xp / 100) + 1;
        let currentXP = xp % 100;
        let streak = parseInt(localStorage.getItem('entryStreak')) || 0;
        let lastEntry = localStorage.getItem('lastEntryDate');

        function updateUI() {
            document.getElementById('lvlDisplay').innerText = level;
            document.getElementById('xpDisplay').innerText = currentXP;
            document.getElementById('xpBar').style.width = currentXP + "%";
            
            const grid = document.getElementById('daysGrid');
            grid.innerHTML = '';
            
            for(let i=1; i<=8; i++) {
                let status = "";
                let icon = i;
                if(i <= streak) { status = "done"; icon = "âœ“"; }
                else if(i === streak + 1) { status = "active"; }

                grid.innerHTML += `
                    <div class="day-box ${status} animate-up" style="animation-delay: ${i*0.05}s">
                        <span class="text-[10px] block font-bold mb-1">ÙŠÙˆÙ…</span>
                        <span class="text-xl font-black">${icon}</span>
                    </div>
                `;
            }

            if(lastEntry === new Date().toDateString()) {
                const btn = document.getElementById('checkBtn');
                btn.disabled = true;
                btn.style.opacity = "0.3";
                btn.innerText = "ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„ÙŠÙˆÙ… âœ…";
            }
        }

        function confirmEntry() {
            const today = new Date().toDateString();
            if(lastEntry === today) return;

            // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø®Ø¨Ø±Ø©
            xp += 20; 
            streak = (streak >= 8) ? 1 : streak + 1;

            localStorage.setItem('userXP', xp);
            localStorage.setItem('entryStreak', streak);
            localStorage.setItem('lastEntryDate', today);

            confetti({ particleCount: 100, spread: 70, origin: { y: 0.8 } });
            showAlert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ±Ùƒ! +20 XP ðŸš€", "#3b82f6");

            setTimeout(() => {
                location.reload();
            }, 1500);
        }

        function showAlert(msg, color) {
            const alert = document.getElementById('customAlert');
            alert.innerText = msg; alert.style.backgroundColor = color; alert.style.display = 'block';
            setTimeout(() => alert.style.display = 'none', 3000);
        }

        updateUI();
    </script>
</body>
</html>
