<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAC PLUS | ØªØ­Ø¯ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; padding: 15px; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¹Ø¬Ù„Ø© */
        #wheelCanvas { transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.3)); }
        
        /* Popup Ø§Ù„Ø³Ø¤Ø§Ù„ */
        #quizModal { display: none; background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(15px); }
        
        .opt-btn { 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 12px; border-radius: 15px; width: 100%; text-align: right; transition: 0.2s;
        }
        .opt-btn:active { transform: scale(0.95); background: #3b82f6; }

        .quest-card { background: rgba(30, 41, 59, 0.4); border-radius: 20px; padding: 15px; border: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body class="pb-20">

    <div class="flex items-center justify-between mb-8 pt-4">
        <div class="flex items-center gap-2 bg-blue-500/10 border border-blue-500/20 px-4 py-2 rounded-2xl">
            <span class="text-yellow-400">â­</span>
            <span id="scoreDisplay" class="font-black">0</span>
        </div>
        <h1 class="text-lg font-black italic text-blue-500">ØªØ­Ø¯ÙŠ <span class="text-white">Ø§Ù„ÙŠÙˆÙ…</span></h1>
    </div>

    <div class="text-center mb-10">
        <div class="relative w-64 h-64 mx-auto mb-6">
            <div class="absolute -top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[20px] border-t-red-500"></div>
            <canvas id="wheelCanvas" width="256" height="256"></canvas>
        </div>
        <button id="spinBtn" onclick="startSpin()" class="bg-blue-600 hover:bg-blue-500 px-10 py-3 rounded-2xl font-black text-xs shadow-xl transition-all active:scale-90">
            Ø¥Ø®ØªØ¨Ø± Ø­Ø¸Ùƒ ÙˆÙ…Ø§Ø¯ØªÙƒ
        </button>
    </div>

    <div class="space-y-4">
        <h3 class="text-xs font-black opacity-50 px-2 uppercase tracking-widest">Ù…Ù‡Ø§Ù… Ø³Ø±ÙŠØ¹Ø©</h3>
        
        <div class="quest-card flex justify-between items-center">
            <div>
                <h4 class="text-xs font-black">Ø³Ø¤Ø§Ù„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</h4>
                <p class="text-[9px] text-gray-500">Ø­Ù„ Ø§Ù„Ù…Ø´ØªÙ‚Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©</p>
            </div>
            <button onclick="openQuiz('math')" class="bg-white/5 border border-white/10 px-4 py-2 rounded-xl text-[10px] font-black">Ø§Ø¨Ø¯Ø£ +10</button>
        </div>

        <div class="quest-card flex justify-between items-center">
            <div>
                <h4 class="text-xs font-black">Ù…Ø±Ø§Ø¯Ù Ù„ØºÙˆÙŠ</h4>
                <p class="text-[9px] text-gray-500">ØªØ±Ø¬Ù…Ø© Ù…ØµØ·Ù„Ø­ ØªÙ‚Ù†ÙŠ</p>
            </div>
            <button onclick="openQuiz('lang')" class="bg-white/5 border border-white/10 px-4 py-2 rounded-xl text-[10px] font-black">Ø§Ø¨Ø¯Ø£ +10</button>
        </div>
    </div>

    <div id="quizModal" class="fixed inset-0 z-50 flex items-center justify-center p-6">
        <div class="w-full bg-slate-900 border border-white/10 p-8 rounded-[2.5rem] shadow-2xl">
            <div id="quizIcon" class="text-4xl mb-4 text-center">ğŸ§ </div>
            <h3 id="questionText" class="text-sm font-black text-center mb-8 leading-relaxed">Ù…Ø§ Ù‡Ùˆ Ù…Ø´ØªÙ‚ Ø§Ù„Ø¯Ø§Ù„Ø© $x^2$ØŸ</h3>
            <div id="options" class="space-y-3">
                </div>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· (Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù…Ù† 0)
        let score = parseInt(localStorage.getItem('userScore')) || 0;
        document.getElementById('scoreDisplay').innerText = score;

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø¬Ù„Ø© (Ù…ÙˆØ§Ø¯)
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const materials = [
            {n:"Ø±ÙŠØ§Ø¶ÙŠØ§Øª", c:"#1e293b", q:"math"},
            {n:"Ø¹Ù„ÙˆÙ…", c:"#3b82f6", q:"science"},
            {n:"ÙÙŠØ²ÙŠØ§Ø¡", c:"#1e293b", q:"physics"},
            {n:"Ø¹Ø±Ø¨ÙŠØ©", c:"#3b82f6", q:"arabic"},
            {n:"ÙØ±Ù†Ø³ÙŠØ©", c:"#1e293b", q:"lang"},
            {n:"ÙÙ„Ø³ÙØ©", c:"#ef4444", q:"phil"} // Ø®Ø§Ù†Ø© Ø§Ù„Ø­Ø¸ Ø§Ù„Ø³ÙŠØ¡ Ø£Ùˆ Ø§Ù„ØµØ¹Ø¨
        ];
        let rotation = 0;

        function drawWheel() {
            const arc = (2 * Math.PI) / materials.length;
            materials.forEach((m, i) => {
                ctx.beginPath(); ctx.fillStyle = m.c; ctx.moveTo(128, 128);
                ctx.arc(128, 128, 124, i*arc, (i+1)*arc); ctx.fill();
                ctx.save(); ctx.translate(128, 128); ctx.rotate(i*arc + arc/2);
                ctx.textAlign="right"; ctx.fillStyle="#fff"; ctx.font="900 12px Cairo";
                ctx.fillText(m.n, 110, 5); ctx.restore();
            });
        }

        function startSpin() {
            // ÙØ­Øµ Ø¥Ø°Ø§ Ù„Ø¹Ø¨ Ø§Ù„ÙŠÙˆÙ…
            const lastSpin = localStorage.getItem('lastSpinDate');
            const today = new Date().toDateString();
            if(lastSpin === today) {
                alert("Ù„Ù‚Ø¯ Ø§Ø³ØªÙ†ÙØ¯Øª Ù„ÙØ© Ø§Ù„ÙŠÙˆÙ…! Ø¹Ø¯ ØºØ¯Ø§Ù‹.");
                return;
            }

            const btn = document.getElementById('spinBtn'); btn.disabled = true;
            const extraDeg = Math.floor(Math.random() * 360) + 3600;
            rotation += extraDeg;
            canvas.style.transform = `rotate(${rotation}deg)`;

            setTimeout(() => {
                const actualDeg = rotation % 360;
                const idx = materials.length - 1 - Math.floor(actualDeg / (360 / materials.length));
                localStorage.setItem('lastSpinDate', today);
                openQuiz(materials[idx].q);
            }, 4000);
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        const quizData = {
            math: { q: "Ù…Ø§ Ù‡Ùˆ Ù…Ø´ØªÙ‚ Ø§Ù„Ø¯Ø§Ù„Ø© $f(x) = x^2$ØŸ", o: ["$2x$", "$x$", "1", "$x^2$"], a: 0 },
            lang: { q: "Ù…Ø§ Ù‡Ùˆ Ù…Ø±Ø§Ø¯Ù ÙƒÙ„Ù…Ø© 'Hardworking' Ø¨Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŸ", o: ["Triste", "Laborieux", "Rapide", "Petit"], a: 1 },
            science: { q: "Ø£ÙŠÙ† ØªØªÙ… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø¶ÙˆØ¦ÙŠØŸ", o: ["Ø§Ù„Ø¬Ø°ÙˆØ±", "Ø§Ù„ØµØ§Ù†Ø¹Ø§Øª Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡", "Ø§Ù„Ø³Ø§Ù‚"], a: 1 }
        };

        function openQuiz(type) {
            const data = quizData[type] || quizData.math;
            document.getElementById('questionText').innerText = data.q;
            const optsDiv = document.getElementById('options');
            optsDiv.innerHTML = '';
            data.o.forEach((opt, i) => {
                optsDiv.innerHTML += `<button onclick="checkAnswer(${i}, ${data.a})" class="opt-btn">${opt}</button>`;
            });
            document.getElementById('quizModal').style.display = 'flex';
        }

        function checkAnswer(chosen, correct) {
            if(chosen === correct) {
                score += 20;
                localStorage.setItem('userScore', score);
                document.getElementById('scoreDisplay').innerText = score;
                alert("Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +20 Ù†Ù‚Ø·Ø© ğŸ‰");
            } else {
                alert("Ù„Ù„Ø£Ø³Ù Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©.. Ø­Ø§ÙˆÙ„ ÙÙŠ Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©!");
            }
            document.getElementById('quizModal').style.display = 'none';
        }

        drawWheel();
    </script>
</body>
</html>
