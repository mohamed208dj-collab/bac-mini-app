<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAC PLUS | ØªØ­Ø¯ÙŠ Ø§Ù„Ø¹Ø¬Ù„Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; padding: 15px; overflow-x: hidden; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¹Ø¬Ù„Ø© */
        #wheelCanvas { transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.2)); }
        
        .pointer {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent;
            border-top: 25px solid #ef4444; z-index: 50;
        }

        /* Modal Ø§Ù„Ø³Ø¤Ø§Ù„ */
        #quizModal { display: none; background: rgba(2, 6, 23, 0.98); backdrop-filter: blur(25px); z-index: 100; }
        
        .opt-btn { 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 15px; border-radius: 18px; width: 100%; text-align: right; transition: 0.2s; font-size: 13px; font-weight: 700;
        }
        .opt-btn:active { background: #3b82f6; transform: scale(0.96); }

        .score-card { background: linear-gradient(135deg, rgba(30,41,59,0.8), rgba(15,23,42,0.9)); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen">

    <div class="fixed top-6 left-0 right-0 px-6 flex justify-between items-center z-40">
        <a href="home.html" class="w-10 h-10 flex items-center justify-center bg-white/5 rounded-full border border-white/10">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7" /></svg>
        </a>
        <div class="score-card px-5 py-2 rounded-2xl flex items-center gap-2 shadow-xl">
            <span class="text-yellow-400 font-bold">â­</span>
            <span id="scoreDisplay" class="font-black text-lg">0</span>
        </div>
    </div>

    <div class="text-center mt-10">
        <h1 class="text-2xl font-black italic mb-2 tracking-tighter">Ø¹Ø¬Ù„Ø© <span class="text-blue-500">Ø§Ù„Ù…ÙˆØ§Ø¯</span></h1>
        <p id="statusMsg" class="text-[10px] text-gray-500 font-bold mb-8 uppercase tracking-widest">Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© Ù„ØªØ­Ø¯ÙŠ Ù†ÙØ³Ùƒ</p>

        <div class="relative w-72 h-72 mx-auto mb-10">
            <div class="pointer"></div>
            <canvas id="wheelCanvas" width="288" height="288"></canvas>
        </div>

        <button id="spinBtn" onclick="spinWheel()" class="bg-blue-600 hover:bg-blue-500 px-12 py-4 rounded-[2rem] font-black text-xs shadow-[0_10px_30px_rgba(37,99,235,0.3)] transition-all active:scale-90 disabled:opacity-30 disabled:pointer-events-none">
            Ø¥Ø¶ØºØ· Ù„Ù„ØªØ¯ÙˆÙŠØ± (1 Ù„ÙØ©/ÙŠÙˆÙ…)
        </button>
    </div>

    <div id="quizModal" class="fixed inset-0 flex items-center justify-center p-6">
        <div class="w-full max-w-sm bg-slate-900 border border-white/10 p-8 rounded-[2.5rem] shadow-2xl text-center">
            <div id="subjectBadge" class="inline-block px-4 py-1 rounded-full bg-blue-500/10 border border-blue-500/20 text-[10px] font-black text-blue-400 mb-6 uppercase italic">--</div>
            <h3 id="questionTitle" class="text-sm font-black mb-8 leading-relaxed">--</h3>
            <div id="optionsContainer" class="space-y-3"></div>
        </div>
    </div>

    <script>
        // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø· ÙˆØ§Ù„Ù„Ù Ø§Ù„ÙŠÙˆÙ…ÙŠ
        let score = parseInt(localStorage.getItem('userScore')) || 0;
        document.getElementById('scoreDisplay').innerText = score;

        // 2. Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙÙ‚Ø·
        const qBank = {
            "Ø±ÙŠØ§Ø¶ÙŠØ§Øª": [
                {q: "Ù…Ø§ Ù‡Ùˆ Ù…Ø´ØªÙ‚ Ø§Ù„Ø¯Ø§Ù„Ø© $x^2$ØŸ", o: ["$2x$", "$x$", "1", "$0$"], a: 0},
                {q: "Ù†Ù‡Ø§ÙŠØ© $1/x$ Ø¹Ù†Ø¯ $+\\infty$ Ù‡ÙŠ:", o: ["$1$", "$0$", "$+\\infty$", "$-1$"], a: 1}
            ],
            "ÙÙŠØ²ÙŠØ§Ø¡": [
                {q: "ÙˆØ­Ø¯Ø© Ù‚ÙŠØ§Ø³ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ù‡ÙŠ:", o: ["Ø§Ù„ÙÙˆÙ„Ø·", "Ø§Ù„Ø£Ù…Ø¨ÙŠØ±", "Ø§Ù„Ø£ÙˆÙ…", "Ø§Ù„ÙˆØ§Ø·"], a: 2},
                {q: "Ù…Ø§ Ù‡Ùˆ Ø±Ù…Ø² Ø«Ø§Ø¨Øª Ø§Ù„Ø¬Ø°Ø¨ Ø§Ù„Ø¹Ø§Ù…ØŸ", o: ["$G$", "$g$", "$k$", "$F$"], a: 0}
            ],
            "Ø¹Ù„ÙˆÙ…": [
                {q: "Ø£ÙŠÙ† ÙŠØªÙ… ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† ÙÙŠ Ø§Ù„Ø®Ù„ÙŠØ©ØŸ", o: ["Ø§Ù„Ù†ÙˆØ§Ø©", "Ø§Ù„Ø±ÙŠØ¨ÙˆØ²ÙˆÙ…Ø§Øª", "Ø§Ù„Ù…ÙŠØªÙˆÙƒÙˆÙ†Ø¯Ø±ÙŠ", "Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„ØºÙˆÙ„Ø¬ÙŠ"], a: 1}
            ],
            "Ø¹Ø±Ø¨ÙŠØ©": [
                {q: "Ù…Ø§ Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ÙÙŠ 'Ø§Ù„Ø¬Ù†Ø¯ÙŠ Ø£Ø³Ø¯'ØŸ", o: ["Ø§Ø³ØªØ¹Ø§Ø±Ø© Ù…ÙƒÙ†ÙŠØ©", "ØªØ´Ø¨ÙŠÙ‡ Ø¨Ù„ÙŠØº", "ÙƒÙ†Ø§ÙŠØ©", "Ù…Ø¬Ø§Ø² Ù…Ø±Ø³Ù„"], a: 1}
            ],
            "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©": [
                {q: "Ø£ÙˆÙ„ Ù…Ù† Ø¢Ù…Ù† Ù…Ù† Ø§Ù„Ø±Ø¬Ø§Ù„ Ù‡Ùˆ:", o: ["Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨", "Ø¹Ø«Ù…Ø§Ù† Ø¨Ù† Ø¹ÙØ§Ù†", "Ø£Ø¨Ùˆ Ø¨ÙƒØ± Ø§Ù„ØµØ¯ÙŠÙ‚", "Ø¹Ù„ÙŠ Ø¨Ù† Ø£Ø¨ÙŠ Ø·Ø§Ù„Ø¨"], a: 2}
            ],
            "ÙØ±Ù†Ø³ÙŠØ©": [
                {q: "Quel est le synonyme de 'Magnifique' ?", o: ["Petit", "Beau", "Grand", "Mauvais"], a: 1}
            ],
            "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ": [
                {q: "Antonym of 'Success' is:", o: ["Victory", "Failure", "Winner", "Try"], a: 1}
            ],
            "ÙÙ„Ø³ÙØ©": [
                {q: "Ù…Ù† Ù‚Ø§Ø¦Ù„ Ø¹Ø¨Ø§Ø±Ø© 'Ø£Ù†Ø§ Ø£ÙÙƒØ± Ø¥Ø°Ù† Ø£Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯'ØŸ", o: ["Ø³Ù‚Ø±Ø§Ø·", "Ø¯ÙŠÙƒØ§Ø±Øª", "ÙƒØ§Ù†Ø·", "Ø£Ø±Ø³Ø·Ùˆ"], a: 1}
            ]
        };

        const subjects = Object.keys(qBank);
        const colors = ['#1e293b', '#3b82f6', '#1e293b', '#3b82f6', '#1e293b', '#3b82f6', '#1e293b', '#ef4444'];
        
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        let rotation = 0;

        function drawWheel() {
            const arc = (2 * Math.PI) / subjects.length;
            subjects.forEach((name, i) => {
                ctx.beginPath();
                ctx.fillStyle = colors[i % colors.length];
                ctx.moveTo(144, 144);
                ctx.arc(144, 144, 140, i * arc, (i + 1) * arc);
                ctx.fill();
                ctx.save();
                ctx.translate(144, 144);
                ctx.rotate(i * arc + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#fff";
                ctx.font = "900 12px Cairo";
                ctx.fillText(name, 130, 5);
                ctx.restore();
            });
        }

        function spinWheel() {
            const lastSpin = localStorage.getItem('lastSpinDate');
            const today = new Date().toDateString();
            
            if(lastSpin === today) {
                alert("Ù„Ù‚Ø¯ Ø§Ø³ØªØ¹Ù…Ù„Øª Ù„ÙØ© Ø§Ù„ÙŠÙˆÙ…! Ø¹Ø¯ ØºØ¯Ø§Ù‹.");
                return;
            }

            const btn = document.getElementById('spinBtn');
            btn.disabled = true;
            
            const extraDeg = Math.floor(Math.random() * 360) + 3600; 
            rotation += extraDeg;
            canvas.style.transform = `rotate(${rotation}deg)`;

            setTimeout(() => {
                const actualDeg = rotation % 360;
                const idx = subjects.length - 1 - Math.floor(actualDeg / (360 / subjects.length));
                const sub = subjects[idx];
                
                localStorage.setItem('lastSpinDate', today);
                showQuiz(sub);
            }, 4000);
        }

        function showQuiz(sub) {
            const questions = qBank[sub];
            const q = questions[Math.floor(Math.random() * questions.length)];
            
            document.getElementById('subjectBadge').innerText = `Ù…Ø§Ø¯Ø© ${sub}`;
            document.getElementById('questionTitle').innerText = q.q;
            
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            q.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => check(i, q.a);
                container.appendChild(btn);
            });
            
            document.getElementById('quizModal').style.display = 'flex';
        }

        function check(idx, correct) {
            document.getElementById('quizModal').style.display = 'none';
            if(idx === correct) {
                score += 20;
                localStorage.setItem('userScore', score);
                document.getElementById('scoreDisplay').innerText = score;
                alert("Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! +20 Ù†Ù‚Ø·Ø© ğŸ‰");
            } else {
                alert("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©.. Ø­Ø¸Ø§Ù‹ Ù…ÙˆÙÙ‚Ø§Ù‹ ØºØ¯Ø§Ù‹!");
            }
        }

        drawWheel();
    </script>
</body>
</html>
