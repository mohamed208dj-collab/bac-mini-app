<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAC PLUS | Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; padding: 15px; }

        .quest-card { background: rgba(30, 41, 59, 0.4); border-radius: 20px; padding: 15px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .quest-card.locked { opacity: 0.5; filter: grayscale(1); pointer-events: none; }

        .opt-btn { 
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 12px; border-radius: 15px; width: 100%; text-align: right; transition: 0.2s; font-size: 13px;
        }
        .opt-btn:active { background: #3b82f6; }

        #quizModal { display: none; background: rgba(2, 6, 23, 0.98); backdrop-filter: blur(20px); z-index: 100; }
        
        .timer-text { font-size: 9px; color: #ef4444; font-weight: 900; }
    </style>
</head>
<body class="pb-20">

    <div class="flex items-center justify-between mb-8 pt-4">
        <div class="bg-yellow-500/10 border border-yellow-500/20 px-4 py-2 rounded-2xl flex items-center gap-2">
            <span class="text-yellow-400">â­</span>
            <span id="scoreDisplay" class="font-black">0</span>
        </div>
        <h1 class="text-lg font-black italic">ØªØ­Ø¯ÙŠ <span class="text-blue-500">Ø§Ù„Ø°ÙƒØ§Ø¡</span></h1>
    </div>

    <div id="tasksList" class="space-y-4">
        <div id="task-math" class="quest-card flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-blue-500/20 rounded-xl flex items-center justify-center text-xl">ğŸ“</div>
                <div>
                    <h4 class="text-xs font-black">ØªØ­Ø¯ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</h4>
                    <p id="timer-math" class="timer-text"></p>
                </div>
            </div>
            <button onclick="startQuest('math')" class="bg-blue-600 px-4 py-2 rounded-xl text-[10px] font-black">Ø¥Ø¨Ø¯Ø£ +20</button>
        </div>

        <div id="task-lang" class="quest-card flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-green-500/20 rounded-xl flex items-center justify-center text-xl">ğŸŒ</div>
                <div>
                    <h4 class="text-xs font-black">Ù…Ø±Ø§Ø¯ÙØ§Øª Ø§Ù„Ù„ØºØ§Øª</h4>
                    <p id="timer-lang" class="timer-text"></p>
                </div>
            </div>
            <button onclick="startQuest('lang')" class="bg-green-600 px-4 py-2 rounded-xl text-[10px] font-black">Ø¥Ø¨Ø¯Ø£ +15</button>
        </div>
    </div>

    <div id="quizModal" class="fixed inset-0 flex items-center justify-center p-6">
        <div class="w-full max-w-sm bg-slate-900 border border-white/10 p-8 rounded-[2.5rem] relative">
            <div class="text-3xl mb-4 text-center">ğŸ’¡</div>
            <h3 id="questionTitle" class="text-sm font-black text-center mb-6 leading-relaxed">--</h3>
            <div id="optionsContainer" class="space-y-3"></div>
        </div>
    </div>

    <script>
        // Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ØªØºÙŠØ±
        const questionBank = {
            math: [
                { q: "Ù…Ø§ Ù‡Ùˆ Ù…Ø´ØªÙ‚ Ø§Ù„Ø¯Ø§Ù„Ø© xÂ²ØŸ", o: ["2x", "x", "1", "0"], a: 0 },
                { q: "Ù…Ø§ Ù‡ÙŠ Ù†Ù‡Ø§ÙŠØ© 1/x Ø¹Ù†Ø¯ +âˆØŸ", o: ["1", "+âˆ", "0", "-âˆ"], a: 2 },
                { q: "Ù…Ø¬Ù…ÙˆØ¹ Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ø«Ù„Ø« Ù‡Ùˆ:", o: ["90Â°", "180Â°", "360Â°", "270Â°"], a: 1 }
            ],
            lang: [
                { q: "Ù…Ø±Ø§Ø¯Ù ÙƒÙ„Ù…Ø© 'Magnificent' Ù‡Ùˆ:", o: ["Bad", "Small", "Grand", "Beautiful"], a: 3 },
                { q: "Ø¶Ø¯ ÙƒÙ„Ù…Ø© 'Fast' Ù‡Ùˆ:", o: ["Slow", "Quick", "Smart", "High"], a: 0 },
                { q: "ØªØ±Ø¬Ù…Ø© ÙƒÙ„Ù…Ø© 'Success' Ù‡ÙŠ:", o: ["ÙØ´Ù„", "Ù†Ø¬Ø§Ø­", "Ù…Ø­Ø§ÙˆÙ„Ø©", "ØªØ¹Ø¨"], a: 1 }
            ]
        };

        let score = parseInt(localStorage.getItem('userScore')) || 0;
        document.getElementById('scoreDisplay').innerText = score;

        function startQuest(type) {
            // Ø§Ø®ØªÙŠØ§Ø± Ø³Ø¤Ø§Ù„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            const questions = questionBank[type];
            const randomIdx = Math.floor(Math.random() * questions.length);
            const question = questions[randomIdx];

            showQuiz(question, type);
        }

        function showQuiz(data, type) {
            document.getElementById('questionTitle').innerText = data.q;
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            data.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'opt-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(i, data.a, type);
                container.appendChild(btn);
            });

            document.getElementById('quizModal').style.display = 'flex';
        }

        function checkAnswer(chosen, correct, type) {
            document.getElementById('quizModal').style.display = 'none';
            
            if (chosen === correct) {
                score += (type === 'math' ? 20 : 15);
                localStorage.setItem('userScore', score);
                document.getElementById('scoreDisplay').innerText = score;
                alert("Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ğŸ‰");
                lockTask(type, 60); // Ù‚ÙÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© Ù„Ù…Ø¯Ø© 60 Ø¯Ù‚ÙŠÙ‚Ø©
            } else {
                alert("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©! Ø­Ø§ÙˆÙ„ Ù„Ø§Ø­Ù‚Ø§Ù‹.");
                lockTask(type, 10); // Ù‚ÙÙ„ Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø·Ø£
            }
        }

        function lockTask(type, minutes) {
            const expireTime = Date.now() + (minutes * 60 * 1000);
            localStorage.setItem(`lock_${type}`, expireTime);
            updateUI();
        }

        function updateUI() {
            ['math', 'lang'].forEach(type => {
                const lockTime = localStorage.getItem(`lock_${type}`);
                const card = document.getElementById(`task-${type}`);
                const timerText = document.getElementById(`timer-${type}`);
                
                if (lockTime && Date.now() < lockTime) {
                    card.classList.add('locked');
                    const remaining = Math.ceil((lockTime - Date.now()) / (60 * 1000));
                    timerText.innerText = `Ù…ØªØ§Ø­Ø© Ø¨Ø¹Ø¯ ${remaining} Ø¯Ù‚ÙŠÙ‚Ø©`;
                } else {
                    card.classList.remove('locked');
                    timerText.innerText = "Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù† âœ…";
                }
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
        setInterval(updateUI, 60000);
        window.onload = updateUI;
    </script>
</body>
</html>
