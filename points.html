<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAC PLUS | Ù…Ø±ÙƒØ² Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: #fff; padding: 15px; }

        /* Ø§Ù„Ø¹Ø¬Ù„Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        #wheel { transition: transform 3s cubic-bezier(0.2, 0, 0.2, 1); filter: drop-shadow(0 0 30px rgba(59, 130, 246, 0.4)); }
        
        .pointer {
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent;
            border-top: 25px solid #ef4444; z-index: 50; filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
        }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… */
        .quest-item {
            background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 24px; padding: 16px; margin-bottom: 12px; transition: 0.3s;
        }
        .quest-item.completed { opacity: 0.5; pointer-events: none; border-color: #10b981; }

        .btn-action { background: #3b82f6; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); }

        /* Modal */
        #taskModal { display: none; background: rgba(2, 6, 23, 0.98); backdrop-filter: blur(20px); z-index: 100; }
    </style>
</head>
<body class="pb-20">

    <div class="flex items-center justify-between mb-8 pt-4 px-2">
        <div class="flex items-center gap-2 bg-white/5 border border-white/10 px-4 py-2 rounded-2xl">
            <span class="text-yellow-400">â­</span>
            <span id="score" class="font-black text-lg">0</span>
        </div>
        <div class="text-left">
            <p class="text-[8px] font-black text-blue-500 uppercase tracking-[0.3em]">Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù…ØªØªØ§Ù„ÙŠ</p>
            <p id="streak" class="text-xs font-black">ğŸ”¥ 1 ÙŠÙˆÙ…</p>
        </div>
    </div>

    <div class="text-center mb-12">
        <div class="relative w-64 h-64 mx-auto mb-8">
            <div class="pointer"></div>
            <canvas id="wheel" width="256" height="256"></canvas>
        </div>
        <button id="spinBtn" onclick="spin()" class="btn-action px-10 py-4 rounded-2xl font-black text-xs transition active:scale-95">
            Ø¥Ø³Ø­Ø¨ Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
        </button>
    </div>

    <div class="px-2">
        <h3 class="text-sm font-black mb-6 flex items-center gap-2">
            <span class="w-2 h-6 bg-blue-500 rounded-full"></span>
            Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø¹Ø±ÙØ© (+10 Ù†Ù‚Ø§Ø·)
        </h3>

        <div id="tasksContainer">
            </div>
    </div>

    <div id="taskModal" class="fixed inset-0 flex items-center justify-center p-6">
        <div class="w-full max-w-sm bg-slate-900 border border-white/10 p-8 rounded-[2.5rem] text-center">
            <h4 id="mSubject" class="text-[10px] font-black text-blue-500 mb-2 italic">--</h4>
            <p id="mQuestion" class="text-sm font-bold mb-8 leading-relaxed">--</p>
            <div id="mOptions" class="space-y-3"></div>
        </div>
    </div>

    <script>
        let points = parseInt(localStorage.getItem('userPoints')) || 0;
        document.getElementById('score').innerText = points;

        // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø¬Ù„Ø© (Ù†Ù‚Ø§Ø· Ù…Ù† 1 Ù„Ù€ 10)
        const canvas = document.getElementById('wheel');
        const ctx = canvas.getContext('2d');
        const sectors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        const colors = ['#0f172a', '#3b82f6', '#0f172a', '#3b82f6', '#0f172a', '#3b82f6', '#0f172a', '#3b82f6', '#0f172a', '#ef4444'];

        function drawWheel() {
            const arc = (2 * Math.PI) / sectors.length;
            sectors.forEach((s, i) => {
                ctx.beginPath(); ctx.fillStyle = colors[i]; ctx.moveTo(128, 128);
                ctx.arc(128, 128, 124, i*arc, (i+1)*arc); ctx.fill();
                ctx.save(); ctx.translate(128, 128); ctx.rotate(i*arc + arc/2);
                ctx.textAlign="right"; ctx.fillStyle="#fff"; ctx.font="900 16px Cairo";
                ctx.fillText(s, 110, 8); ctx.restore();
            });
        }

        function spin() {
            const lastSpin = localStorage.getItem('lastSpin');
            if(lastSpin === new Date().toDateString()) return alert("Ø¹Ø¯ ØºØ¯Ø§Ù‹ Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©!");

            const btn = document.getElementById('spinBtn');
            btn.disabled = true;
            const deg = Math.floor(Math.random() * 360) + 2160; // Ø¯ÙˆØ±Ø§Ù† Ø³Ø±ÙŠØ¹ 3 Ø«ÙˆØ§Ù†ÙŠ
            canvas.style.transform = `rotate(${deg}deg)`;

            setTimeout(() => {
                const actualDeg = deg % 360;
                const idx = sectors.length - 1 - Math.floor(actualDeg / (360 / sectors.length));
                addPoints(sectors[idx]);
                localStorage.setItem('lastSpin', new Date().toDateString());
                btn.innerText = "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·";
            }, 3000);
        }

        // 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ±
        const bank = [
            {id: 1, s: "Ø¹Ø±Ø¨ÙŠØ©", q: "Ù…Ø§ Ù‡Ùˆ Ø¬Ù…Ø¹ ÙƒÙ„Ù…Ø© 'Ø­Ù„ÙŠØ¨'ØŸ", o: ["Ø£Ø­Ù„Ø¨Ø©", "Ù„Ø§ ÙŠÙˆØ¬Ø¯", "Ø­Ù„Ø¨Ø§Ù†"], a: 1},
            {id: 2, s: "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", q: "Meaning of 'Sustainable'?", o: ["Ù…Ø¤Ù‚Øª", "Ù…Ø³ØªØ¯Ø§Ù…", "Ø³Ø±ÙŠØ¹"], a: 1},
            {id: 3, s: "Ø¹Ù„ÙˆÙ…", q: "Ù…Ù‚Ø± ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† Ù‡Ùˆ:", o: ["Ø§Ù„Ù†ÙˆØ§Ø©", "Ø§Ù„Ø±ÙŠØ¨ÙˆØ²ÙˆÙ…", "Ø§Ù„Ø³ÙŠØªÙˆØ¨Ù„Ø§Ø²Ù…"], a: 1}
        ];

        function loadTasks() {
            const container = document.getElementById('tasksContainer');
            container.innerHTML = '';
            bank.forEach(t => {
                const isDone = localStorage.getItem(`task_${t.id}`);
                container.innerHTML += `
                    <div class="quest-item ${isDone ? 'completed' : ''}" onclick="openTask(${t.id})">
                        <div class="flex justify-between items-center">
                            <div>
                                <h4 class="text-xs font-black">Ø³Ø¤Ø§Ù„ ÙÙŠ ${t.s}</h4>
                                <p class="text-[9px] text-gray-500">Ø£Ø¬Ø¨ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù„ØªØ­ØµÙ„ Ø¹Ù„Ù‰ 10 Ù†Ù‚Ø§Ø·</p>
                            </div>
                            <span class="text-xs">ğŸ’°</span>
                        </div>
                    </div>`;
            });
        }

        function openTask(id) {
            const t = bank.find(x => x.id === id);
            document.getElementById('mSubject').innerText = t.s;
            document.getElementById('mQuestion').innerText = t.q;
            const opts = document.getElementById('mOptions');
            opts.innerHTML = '';
            t.o.forEach((opt, i) => {
                opts.innerHTML += `<button onclick="checkTask(${id}, ${i}, ${t.a})" class="w-full p-4 bg-white/5 border border-white/10 rounded-2xl text-xs font-bold text-right active:bg-blue-600 transition">${opt}</button>`;
            });
            document.getElementById('taskModal').style.display = 'flex';
        }

        function checkTask(id, chosen, correct) {
            if(chosen === correct) {
                addPoints(10);
                localStorage.setItem(`task_${id}`, true);
                alert("Ø¨Ø±Ø§ÙÙˆ! Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© +10 Ù†Ù‚Ø§Ø·");
            } else {
                alert("Ù„Ù„Ø£Ø³Ù Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!");
            }
            document.getElementById('taskModal').style.display = 'none';
            loadTasks();
        }

        function addPoints(val) {
            points += val;
            localStorage.setItem('userPoints', points);
            document.getElementById('score').innerText = points;
        }

        drawWheel();
        loadTasks();
    </script>
</body>
</html>
